(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[659],{437:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vinylCollection",function(){return t(4044)}])},4044:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return _}});var r=t(7568),a=t(797),l=t(414),s=t(5893),i=t(4184),o=t.n(i),u=t(9474),c=t(7445),d=t(4221),h=t(5152),m=t.n(h),f=t(9008),x=t.n(f),g=t(5675),p=t.n(g),b=t(7294),v=function(e){return(0,s.jsx)("select",{className:"block appearance-none rounded border border-gray-400 bg-white py-1 px-10 leading-tight focus:outline-none",onChange:e.handleChange,value:e.value,children:e.options.map(function(e,n){return(0,s.jsx)("option",{value:e.value,children:e.label},n)})})},C=t(1348),j=t(9384),A=m()(function(){return Promise.all([t.e(536),t.e(205)]).then(t.bind(t,205))},{loadableGenerated:{webpack:function(){return[205]}},ssr:!1}),y={ASC:"ASC",DESC:"DESC"},E={DATE:"DATE",NAME:"NAME"},w=function(e,n,t){var r,l,s,i;return n===E.DATE?e&&0!==e.length?(0,a.Z)(e).sort(function(e,n){var r=e.item.dateAdded,a=n.item.dateAdded,l=new Date(r),s=new Date(a);return t===y.ASC?(0,u.Z)(l,s):(0,c.Z)(l,s)}):[]:e&&0!==e.length?(0,a.Z)(e).sort(function(e,n){var r=(0,j.x)(e.item.artists,"and"),a=(0,j.x)(n.item.artists,"and");if(t===y.DESC){var l=r.localeCompare(a);return 0===l?e.item.album.localeCompare(n.item.album):l}var s=a.localeCompare(r);return 0===s?n.item.album.localeCompare(e.item.album):s}):[]},S=function(e){var n=new Date(e.dateAdded).toLocaleDateString();return(0,s.jsx)("div",{className:o()("relative p-4","align-center flex flex-wrap"),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p(),{alt:"Image didn't load",className:o()({"blur-sm":e.needsBlur},"w-150 h-150 mr-4"),height:"150",src:e.thumbnail,width:"150"})," ",(0,s.jsxs)("p",{className:"ml-2 text-5xl text-white",children:[(0,s.jsx)("strong",{children:1===e.artists.length?"Artist:":"Artists:"})," ",(0,j.x)(e.artists,"and"),(0,s.jsx)("br",{}),(0,s.jsx)("strong",{children:"Album:"})," ",e.album,(0,s.jsx)("br",{}),(0,s.jsx)("strong",{children:"Date Added:"})," ",n]})]})})},D=function(e){return 0!==e.vinylCollection.length||e.noSearchResults?0!==e.vinylCollection.length?(0,s.jsx)("ol",{children:e.vinylCollection.map(function(e){var n=e.item,t=e.id;return(0,s.jsx)("li",{children:(0,s.jsx)(S,{album:n.album,artists:n.artists,dateAdded:n.dateAdded,needsBlur:n.needsBlur,thumbnail:n.thumbnail})},t)})}):(0,s.jsxs)("p",{children:["There are no results for the search '",e.searchTerm,"'. Try backspacing or searching for another search term."]}):(0,s.jsx)("p",{children:"My vinyl collection is loading."})},N=new d.Z([],{threshold:.2,keys:["item.album","item.artists"]}),_=function(){var e,n=(0,b.useState)(y.ASC),t=n[0],i=n[1],o=(0,b.useState)(E.NAME),u=o[0],c=o[1],d=(0,b.useState)([]),h=d[0],m=d[1],f=(0,b.useState)([]),g=f[0],p=f[1],j=(0,b.useState)(""),S=j[0],_=j[1],T=(0,b.useMemo)(function(){return 0!==g.length},[g]),k=(e=(0,r.Z)(function(){var e,n,r,a,s,i;return(0,l.__generator)(this,function(r){switch(r.label){case 0:e="https://ch9mysodje.execute-api.us-east-1.amazonaws.com/vinyl-collection",n={method:"GET"},r.label=1;case 1:return r.trys.push([1,4,,5]),[4,fetch(e,n)];case 2:return[4,r.sent().json()];case 3:return s=w(r.sent(),u,t),m(s),p(s),N.setCollection(g),[3,5];case 4:return i=r.sent(),console.log(i),[3,5];case 5:return[2]}})}),function(){return e.apply(this,arguments)});(0,b.useEffect)(function(){k()},[]);var M=function(e){_(e.target.value)},Z={handleChange:function(e){i(e.target.value)},options:[{label:"Ascending",value:"ASC"},{label:"Descending",value:"DESC"},]},B={handleChange:function(e){c(e.target.value)},options:[{label:"Name",value:"NAME"},{label:"Date Added",value:"DATE"},]};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x(),{children:(0,s.jsx)("title",{children:"My Vinyl Collection"})}),(0,s.jsx)(A,{sections:C.D6}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(v,{handleChange:Z.handleChange,options:Z.options,value:t}),(0,s.jsx)("br",{}),(0,s.jsx)(v,{handleChange:B.handleChange,options:B.options,value:u}),(0,s.jsx)("br",{}),(0,s.jsx)("input",{onChange:M,placeholder:"Search my vinyl collection!",type:"text"}),(0,s.jsx)(D,{noSearchResults:T,searchTerm:S,vinylCollection:w(function(e,n){if(""===n)return e;N.setCollection(e);var t,r=(t=N.search(n),(0,a.Z)(t).sort(function(e,n){return e.refIndex-n.refIndex}).map(function(e){return e.item}));return 0===r.length?(N.setCollection(g),r):(N.setCollection(r),r)}(h,S),u,t)})]})}}},function(e){e.O(0,[46,294,914,348,774,888,179],function(){return e(e.s=437)}),_N_E=e.O()}]);